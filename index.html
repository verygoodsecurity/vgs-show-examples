<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./style.css">
  <title>Document</title>
</head>
<body>
  <div class="wr">
    <header class="header">
      <h1>VGS Show.js example</h1>
      <p>The VGS Show.js JavaScript library enables you to securely display sensitive data in a webpage while safely isolating that sensitive data from your systems and any 3rd party scripts. This enables you to instruct VGS to securely share data directly with your users while limiting your data security compliance burden.</p>
      <nav>
        <a href="#">Documentation</a>
        <a href="#">Github Examples</a>
        <a href="#">Start Building</a>
      </nav>
    </header>


    <main>
      <h2>Revealing credit card data</h2>
      <div class="content">
        
        <div class="left-col">
          <h3>User’s UI</h3>
          <p>Below you can see how the redacted data is displayed in your application’s UI.</p>
          
          <div class="cc-wr">
            <div class="cc">
              <div class="title">VG BANK</div>
              <div id="masked-card-number" class="cc-number">&#x2217;&#x2217;&#x2217;&#x2217; &#x2217;&#x2217;&#x2217;&#x2217; &#x2217;&#x2217;&#x2217;&#x2217; 1111</div>
              <div id="secret-card-number"  class="cc-number --hidden"></div>
              <div class="cc-details-wr">
                <div class="cc-details">
                  <div class="cc-label">Name on card</div>
                  <div class="cc-name">Joe Business</div>
                </div>
                <div class="cc-details">
                  <div class="cc-label">Expiration</div>
                  <div class="cc-name">12/23</div>
                </div>
                <div class="cc-details">
                  <div class="cc-name">
                    <img src="./visa.svg" alt="">
                  </div>
                </div>
              </div>
            </div>
            <div id="reveal" class="reveal">Reveal Data</div>
            <div id="copy" class="reveal"></div>
            <div id="reset" class="reveal">Reset</div>
            
          </div>

          <p>
            Press <b>Reveal Data</b> to see <span class="mark">&lt;div id="masked-card-number"&gt;</span> swap for <span class="mark">&lt;div id="secret-card-number"&gt;</span> and the payload containing sensitive data get rendered in the iframe with it.
          </p>

          <p>More examples of Show.js can be found in <a href="https://www.verygoodsecurity.com/docs/vgs-show/js/configuration#code-examples" target="_blank">VGS Docs</a>.</p>
          
        </div>
        <div class="right-col">
          <h3>Application side</h3>
          <p>
            A placeholder credit card number <span class="mark">&lt;div id="masked-card-number"&gt;</span> is displayed by default
          </p>
          <p>
            The div where the sensitive data will be rendered, represented by <span class="mark">&lt;div id="secret-card-number"&gt;</span>, is initially hidden
          </p>
          <p>
            The appearance of the rendered data is fully customizable to match your application using
          </p>
          
          <div class="code-wr">
            <span class="label">HTML</span>
            <pre><code>
              &lt;div class="container"&gt;
                &lt;div class="flex card" id="cc"&gt;
                  &lt;div id="masked-card-number"&gt;**** **** **** 1111&lt;/div&gt;
                  &lt;div id="secret-card-number"&gt;&lt;/div&gt;
                  &lt;div id="secret-card-number"&gt;&lt;/div&gt;
                  &lt;span id="name-on-card"&gt;&lt;/span&gt;
                  &lt;span id="user-name"&gt;&lt;/span&gt;
                  &lt;span id="expiration"&gt;&lt;/span&gt;
                  &lt;span id="card-expiration-date"&gt;&lt;/span&gt;
                &lt;/div &gt;
                &lt;button id="reveal" &gt;Reveal&lt;/button&gt;
                &lt;div id="copy"&gt;&lt;/div&gt;
              &lt;/div &gt;
              &lt;script src="https://js.verygoodvault.com/vgs-show/1.2/show.js" &gt;&lt;/script&gt;
            </code></pre>
          </div>
          <br> 
          <div class="code-wr --js">
            <span class="label">JS</span>
            <pre>
              <code>
                const show = VGSShow.create('tntvrf6mlhu', function(state) {});
                const revealBtn = document.getElementById('reveal'); 
                
                revealBtn.addEventListener('click', () => {
                  document.getElementById('masked-card-number').style.display ='none';
                  revealBtn.style.display = 'none';
                  
                  const cardNumber = show.request({
                    name: 'data-text',
                    method: 'POST',
                    path: '/post',
                    payload: {'card_number': 'tok_sandbox_buH88U6sx9KqhTwvvGfhcK'},
                    htmlWrapper: 'text',
                    serializers:
                    [show.SERIALIZERS.replace('(\\d{4})(\\d{4})(\\d{4})(\\d{4})','$1
                    $2 $3 $4')],
                    jsonPathSelector: 'json.card_number',
                  });

                  cardNumber.render('#secret-card-number', {
                    'font-size': 24px,
                    'font-family': '"PT Mono", monospace',
                  });
                });</code>
            </pre>
          </div>
        </div>

      </div>
    </main>

  </div>
  <script src="https://js.verygoodvault.com/vgs-show/1.2/show.js"></script>
  <script src="./main.js"></script>
</body>
</html>